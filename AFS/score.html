<!DOCTYPE html>
<html lang="en">

<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="">
<meta name="author" content="">
<%@page language="java" contentType="text/html; charset=utf-8" pageEncoding="utf-8"%>


<title>RESULT</title>

   <!--파비콘-->
  <link rel="icon" href="./favicon.ico" type="image/x-icon">

<!-- Custom fonts for this template-->
<link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet"
	type="text/css">
<link
	href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
	rel="stylesheet">

<!-- Custom styles for this template-->
<link href="css/sb-admin-2.min.css" rel="stylesheet">

<!-- Google Web Fonts -->
<link rel="preconnect" href="https://fonts.gstatic.com">
<link
	href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap"
	rel="stylesheet">

<!-- Font Awesome -->
<link
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css"
	rel="stylesheet">

<!-- Libraries Stylesheet -->
<link href="lib/owlcarousel/assets/owl.carousel.min.css"
	rel="stylesheet">

<!-- Customized Bootstrap Stylesheet -->
<link href="css/style.css" rel="stylesheet">

<!-- Custom styles for this page -->
<link href="vendor/datatables/dataTables.bootstrap4.min.css"
	rel="stylesheet">
<!--include 코드-->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
	$(function() {
		$("#navInclude").load("navbar.html");
		$("#footerInclude").load("footer.html");
	});
</script>
<style>
</style>
</head>

<body id="page-top">
<%@ include file="./py_exe.html"%>
<%@ page import="java.text.SimpleDateFormat" %>
<%
// 현재 날짜 및 시간 가져오기
Date currentDate = new Date();
// 날짜 형식 지정
SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm");
// 형식에 맞게 날짜를 문자열로 변환
String todayDate = dateFormat.format(currentDate);

String url = "";
String status = "";
String ipAddress = "";
String check_score = "";
String countryCode = "";
String ports  = "";

String result = request.getParameter("result");

if (result != null) {
    String inputString = result;

    String[] parts = inputString.split(";");

    url = parts[0];
    status = parts[1];
    ipAddress = parts[2];
    check_score = parts[3];
    countryCode = parts[4];
    ports = parts[5];

}
%>
	<!-- Page Wrapper -->
	<div id="wrapper">
		<!-- Content Wrapper -->
		<div id="content-wrapper" class="d-flex flex-column">
			<!-- Main Content -->
			<div id="content">
				<!-- 네비게이션 -->
				<a href="index.html" class="navbar-brand ml-lg-3"> 
					<img src="img/logo.png" width="100px" height="40px">
				</a>
				<div class="container-fluid p-0">
					<h1 class="mx-auto" style="padding: 20px; text-align: center;">RESULT</h1>
				</div>
				<hr>
				<!-- Begin Page Content -->
				<div class="container-fluid">
					<!-- 첫번째 줄  -->
					<div class="row">

						<!-- 첫번째 줄 1번째 박스, 원그래프 -->
						<!-- 파라미터 값 : score -->
						<div class="col-xl-4 col-lg-5">
							<div class="card shadow mb-4" style="color: black; height: 446px;">
								<!-- 카드헤더 -->
								<div class="card-header py-3">
									<h6 class="m-0 font-weight-bold text-primary">Domain
										scoring</h6>
								</div>
								<!-- 카드바디 -->
								<div class="card-body" style="padding: 0px;">
									<div class="pie-chart pie-chart1 pt-4 pb-2"
										style="margin-top: 45px; background: #e9ecef;">
										<span class="center">0%</span>
									</div>
									<div class="mt-4 text-center small">
										<span class="mr-2" style="color: black;"> <i
											class="fas fa-circle text-primary" style="color:#3D81F5 !important;"></i> 안전
										</span>
										<span class="mr-2" style="color: black;"> <i
											class="fas fa-circle text-primary" style="color:#12BA69 !important;"></i> 보통
										</span>
										<span class="mr-2" style="color: black;"> <i
											class="fas fa-circle text-primary" style="color:#FCC436 !important;"></i> 주의
										</span>
										<span class="mr-2" style="color: black;"> <i
											class="fas fa-circle text-primary" style="color:#DD493C !important;"></i> 위험
										</span>
									</div>
								</div>
							</div>
						</div>
						<!-- 첫번째 줄 2번째 박스 -->
						<div class="col-xl-8 col-lg-5">
							<!-- 카드 -->
							<div class="card shadow mb-4">
								<!-- 카드 헤더 -->
								<div class="card-header py-3">
									<h6 class="m-0 font-weight-bold text-primary">information</h6>
								</div>
								<!-- 카드 바디 -->
								<div class="table-responsive" style="overflow-x: hidden;">
									<table class="table"
										style="margin: 15px 0 15px 0;border: 3px solid #ffffff;background-color: #f8f9fc;width: 100%;">
										<tbody>
											<tr>
												<th scope="row">URL</th>
												<td><%=url%></td>
											</tr>
											<tr>
												<th scope="row">IP Address</th>
												<td><%=ipAddress%></td>
											</tr>
											<tr>
												<th scope="row">Score</th>
												<td><%=check_score%></td>
											</tr>
											<tr>
												<th scope="row">Location</th>
												<td><%=countryCode%>&nbsp;<img src="flag/<%=countryCode%>.gif" width="40px"/></td>
											</tr>
											<tr>
												<th scope="row">실행 시간</th>
												<td><%=todayDate%></td>
											</tr>
											<tr>
												<th scope="row">Open Port</th>
												<td><%=ports%></td>
											</tr>
											<tr>
												<th scope="row">KISA WHOIS</th>
												<td><%=status%></td>
											</tr>

										</tbody>
									</table>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- /.container-fluid -->

		</div>
		<!-- End of Main Content -->



	</div>
	<!-- End of Content Wrapper -->


	<!-- End of Page Wrapper -->

	<!-- 최상위로 스크롤 올려주는 버튼-->
	<a class="scroll-to-top rounded" href="#page-top"> <i
		class="fas fa-angle-up"></i>
	</a>
	<hr>
	<!--푸터 -->
	<footer class="sticky-footer bg-white">
		<div class="container my-auto">
			<div class="copyright text-center my-auto">
				<span>Copyright &copy; Anti Fishing Scanner 2023</span>
			</div>
		</div>
	</footer>
	<!-- 푸터 끝 -->



	<!-- Bootstrap core JavaScript-->
	<script src="vendor/jquery/jquery.min.js"></script>
	<script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

	<!-- Core plugin JavaScript-->
	<script src="vendor/jquery-easing/jquery.easing.min.js"></script>

	<!-- Custom scripts for all pages-->
	<script src="js/sb-admin-2.min.js"></script>




	<!-- 도넛 차트 스크립트 -->
	<script>
		$(window).ready(function() {
			//var score = parseInt(getParameterByName('score')) || 0;
			var score = document.querySelector('#content > div:nth-child(4) > div > div.col-xl-8.col-lg-5 > div > div.table-responsive > table > tbody > tr:nth-child(3) > td').innerText;
            if(parseInt(score)>=80){
                var color="#3D81F5";
            } else if(parseInt(score)>=60){
                var color="#12BA69";
            } else if(parseInt(score)>=40){
                var color="#FCC436";
            } else{
                var color="#DD493C";
            }
			$('.pie-chart1 .center').text(score + '%');
			draw(score, '.pie-chart1', color);
		});

		function draw(max, classname, colorname) {
			var i = 1;
			var func1 = setInterval(function() {
				if (i <= max) {
					color1(i, classname, colorname);
					i++;
				} else {
					clearInterval(func1);
				}
			}, 10);
		}

		function color1(i, classname, colorname) {
			var gradientColor = (i == 0) ? "#e9ecef" : colorname + " 0% " + i
					+ "%, #e9ecef " + i + "% 100%";
			$(classname).css({
				"background" : "conic-gradient(" + gradientColor + ")"
			});
		}

		function getParameterByName(name) {
			var url = window.location.href;
			name = name.replace(/[\[\]]/g, '\\$&');
			var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'), results = regex
					.exec(url);
			if (!results)
				return null;
			if (!results[2])
				return '';
			return decodeURIComponent(results[2].replace(/\+/g, ' '));
		}
	</script>


</body>

</html>
